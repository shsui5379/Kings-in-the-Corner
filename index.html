<!doctype html>
	<html>
		<head>
			<link href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap" rel="stylesheet">
			<title>Kings in the Corner</title>
			<link rel="shortcut icon" type="image/png" href="cardimages/back-red-75-3.png"/>
			<style>
				/*general*/
				body, button, div {
					background-color: #ffbd38;
					font: 400 30px TW Cen MT;
					margin: 16px 0px;
					text-align: center;
				}
				h1 {
					text-align: center;
					font: 300 50pt "Press Start 2P";
				}

				/*scoreboard, buttons region*/
				#scoreboard, #instructionOpen, #reset {
					position: absolute;
					background-color: inherit;
				}
				#scoreboard {
					bottom: 1%;
					width: 100%;
				}
				#instructionOpen {
					left: 1%;
				}
				#reset {
					right: 1%;
				}

				/*buttons*/
				button {
					border-radius: 4px;
					height: 36px;
					padding: 0px 16px;
					margin: 8px 14px;
					outline: none;
				}
				button:hover {
					box-shadow: 0px 2px 4px -1px rgba(0,0,0,.2), 0px 4px 5px 0px rgba(0,0,0,.14), 0px 1px 10px 0px rgba(0,0,0,.12);
				}
				button:active {
					box-shadow: 0px 5px 5px -3px rgba(0,0,0,.2), 0px 8px 10px 1px rgba(0,0,0,.14), 0px 3px 14px 2px rgba(0,0,0,.12);
				}

				/*cards*/
				.blank {
					width: 75px;
					height: 108px;
					display: inline-block;
				}
				#center {
					position: relative;
					top: -296px;
					box-shadow: 2px 2px 0px 1px white;
				}

				/*instructions*/
				#instructionPopup {
					display: none;
					width: 76%;
					font-size: 15pt;
					position: absolute;
					top: 12%;
					left: 12%;
					z-index: 1;
					box-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0,0,0,0.12);
					border-radius: 4px;
				}
				h6 {
					font-size: 25pt;
					margin: 20px 0px;
					font-weight: 500;
					text-decoration: underline;
				}
				ul {
					display: inline-block;
				}
				p {
					margin: 0px;
				}
				#instructionClose {
					margin: 20px;
				}

				#messageBoard {
					background-color: inherit;
				}
			</style>
			<script>
				//initializations and objects
				function initialize() {
					groups = [document.getElementsByClassName("corner"), document.getElementsByClassName("top"), document.getElementsByClassName("side")];
					for (var i = 0; i < groups.length; i++) { 
						for (var el of groups[i]) {
							el.src = "cardimages/target.png";
							el.space = new CardSpace(i); //represent each card space element from the front end as an object in the back end
						}
					}

					deck = new CardDeck() //an empty deck
					deck.populate(); //fill the deck
					deck.shuffle(); //shuffle the deck

					instructionState = document.getElementById("instructionPopup");
				}

				HTMLCollection.prototype.allOccupied = function() { //determine how many CardSpace in that group is occupied
					
				}
				HTMLCollection.prototype.allRoyals = function() { //determines if there are 4 royals in that group
					
				}

				function CardSpace(loc) { //the individual card spaces 
					this.groupNum = loc; //0 is corner, 1 is top/bottom, 2 is side
				}
				CardSpace.prototype.action = function() { //onclick action of card spaces

				}

				function Card(s, r) { //the individual cards
					this.rank = r;
					this.imageSrc = r+"-"+s+".png";
				}

				function CardDeck() {} //a deck of cards
				CardDeck.prototype = Array.prototype; //like an array
				CardDeck.prototype.populate = function() { //fills the deck with a standard deck
					for (var r=1; r!=14; r++) { //ranks
						for (var s=0; s!=4; s++) { //suits
							this.push(new Card(s, r));
						}
					}
				}
				CardDeck.prototype.shuffle = function() { //shuffling the deck of cards
					var temp = [];
					while (this.length != 0) {
						temp.push((this.splice(randomInteger(0, this.length-1), 1))[0]); //pull cards from random order into a temporary deck
					}
					this.push.apply(this, temp); //replace the actual deck with the new shuffled one
				}

				function randomInteger(lower, upper) {  //random number generator
					var multiplier = upper - lower + 1;
					var rnd = Math.floor((Math.random() * multiplier) + lower);
					return rnd;
				}

				function toggleInstructions() {
					if (instructionState.style.display == "") { //open
						instructionState.style.display = "inline-block";
						document.body.style.backgroundColor = "#745619"; //dim background
					} else { //close
						instructionState.style.display = "";
						document.body.style.backgroundColor = "#ffbd38";
					}
				}
				function reset() {
					if(confirm("Are you sure you want to reset this round?  This cannot be undone.")) {

					}
				}
			</script>
		</head>
        <body onload="initialize();">
			<!-- top region -->
			<h1>Kings in the Corner</h1>
			<div id="messageBoard">This is a test message!</div>
			<br />

			<!-- board -->
			<span>
				<img class="corner" />
				<img class="top" />
				<img class="top" />
				<img class="corner" />
				<br />

				<img class="side" />
				<span class="blank"></span>
				<span class="blank"></span>
				<img class="side" />
				<br />

				<img class="side" />
				<span class="blank"></span>
				<span class="blank"></span>
				<img class="side" />
				<br />

				<img class="corner" />
				<img class="top" />
				<img class="top" />
				<img class="corner" />
				<br />

				<img id="center" src="cardimages/back-red-75-3.png"/>
			</span>

			<!-- instructions -->
			<div id="instructionPopup">
				<h6>Instructions</h6>
				<p>
					Start by clicking the deck in the center to draw a card.  Then, look at the card.  If it is a
					<ul>
						<li>Jack, it must be placed on a non-corner space on the left or right sides.</li>
						<li>Queen, it must be placed on a non-corner space on the top or bottom sides.</li>
						<li>King, it must be placed on a corner.</li>
						<li>number card, it can be placed anywhere.</li>
					</ul>
					<br />
					To place a card down, click on an appropriate empty card space.  If there are no appropriate card spaces free for you to put the card down on, you lost the game. 
					<br />
					Once you sucessfully filled all the spaces with appropriate cards, the game enters the removal phase.  
					<br />
					In this phase, click on any 2 number cards that sum to 10 to take them off the board.  A 10 card by itself can be clicked on to be removed.   An Ace is worth 1.  
					<br />
					Once all the number cards are taken off the board, you win the game.  If that's not possible, you lost the game.  
					<br /><br />
					You can earn points by
					<br />
					<ul>
						<li>placing a picture card down for 1 point.</li>
						<li>placing down 4 cards of the same royalty for 4 points.</li>
						<li>winning the game for 12 points + 1 point for each card left in the deck.</li>
					</ul>
					<br />
					You can earn a powerup once per round for your next round by
					<ul>
						<li>placing 4 kings for a card peek, which allows you one opportunity to peek at the next card in the deck.</li>
						<li>placing 4 queens for a triple play, which allows you one opportunity to remove 3 cards summing to 10 at once during removal phase.</li>
						<li>placing 4 jacks for a jump, which allows you to move a card that's already placed on the board (but must still be placed in an appropriate location).</li>
					</ul>
				</p>
				<button onclick="toggleInstructions()" id="instructionClose">Close</button>
			</div>

			<!-- scoreboard, button region -->
			<div id="scoreboard">
				<button id="instructionOpen" onclick="toggleInstructions();">Instructions</button>
				Current score: <span id="currentScore">0</span> High score: <span id="highScore">0</span>
				<button id="reset" onclick="reset();">Reset</button>
			<div>
		</body>
	</html>